<!DOCTYPE html>
<head>
  <meta
    data-n-head="ssr"
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
  />
  <meta data-n-head="ssr" name="format-detection" content="telephone=no" />
  <script src="https://unpkg.com/vconsole/dist/vconsole.min.js"></script>
  <script>
    // VConsole will be exported to `window.VConsole` by default.
    var vConsole = new window.VConsole();
  </script>
</head>
<html style="font-size: 55.2px" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22zh%22%7D%7D" data-dpr="1" lang="zh">
  <body>
    <div class="flex-box">
      重定向图片:
      <img data-src="/assets/img/1" alt="没有加载到" />
      <hr />
      正常图片:
      <img data-src="/images/icon.png" alt="没有加载到" />
    </div>
    <script>
      const imgs = document.querySelectorAll('img');
      imgs.forEach((img) => {
        console.log('imgs forEach');

        /**
         * @notice 下面一行 alert 取消注释，则302图片能正常加载(意外发现)，请检查具体原因
         */
        // alert('amazing alert');
        img.addEventListener('load', (e) => {
          alert(e.type + ' event: ' + img.dataset.src);
        });
        img.addEventListener('error', (e) => {
          alert(e.type + ' event: ' + img.dataset.src);
        });
        img.addEventListener('abort', (e) => {
          alert(e.type + ' event: ' + img.dataset.src);
        });
        img.src = img.dataset.src;
      });
    </script>
  </body>
</html>
